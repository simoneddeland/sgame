/*! SGame Extended by Simon Eddeland */
function Entity(a,b,c,d){this.rectangle=a,this.img=b,this.update=function(){},this.rotation=c||0,this.origin=d||new Vector2(a.width/2,a.height/2)}function TextEntity(a,b,c,d){this.text=a||"",this.position=b||new Vector2(0,0),this.font=c||"18px sans-serif",this.color=d||"Black",this.update=function(){}}function Camera(a,b,c){this.sb=a,this.x=b,this.y=c}Entity.prototype={intersects:function(a){var b=SGame.rotatedRectanglePoints(this.rectangle,-this.rotation,this.origin),c=SGame.rotatedRectanglePoints(a.rectangle,-a.rotation,a.origin);return SGame.doPolygonsIntersect(b,c)}},TextEntity.prototype={},Camera.prototype={draw:function(a){this.sb.draw(a.img,new Rectangle(a.rectangle.x-this.x,a.rectangle.y-this.y,a.rectangle.width,a.rectangle.height),a.rotation,a.origin)},drawString:function(a){this.sb.drawString(a.text,new Vector2(a.position.x-this.x,a.position.y-this.y),a.font,a.color)},drawUIEntity:function(a){this.sb.draw(a.img,a.rectangle,a.rotation,a.origin)},drawUIString:function(a){this.sb.drawString(a.text,a.position,a.font,a.color)}},SGame.rotatedRectanglePoints=function(a,b,c){var d={x:a.x+c.x,y:a.y+c.y};return[SGame.rotatePoint({x:a.x,y:a.y},d,b),SGame.rotatePoint({x:a.x+a.width,y:a.y},d,b),SGame.rotatePoint({x:a.x+a.width,y:a.y+a.height},d,b),SGame.rotatePoint({x:a.x,y:a.y+a.height},d,b)]},SGame.rotatePoint=function(a,b,c){var d=Math.PI/180*c,e=Math.cos(d),f=Math.sin(d),g=e*(a.x-b.x)+f*(a.y-b.y)+b.x,h=e*(a.y-b.y)-f*(a.x-b.x)+b.y;return{x:g,y:h}},SGame.doPolygonsIntersect=function(a,b){var d,e,f,g,h,i,j,k,c=[a,b];for(g=0;g<c.length;g++){var l=c[g];for(h=0;h<l.length;h++){var m=(h+1)%l.length,n=l[h],o=l[m],p={x:o.y-n.y,y:n.x-o.x};for(d=e=void 0,i=0;i<a.length;i++)f=p.x*a[i].x+p.y*a[i].y,("undefined"==typeof d||f<d)&&(d=f),("undefined"==typeof e||f>e)&&(e=f);for(j=k=void 0,i=0;i<b.length;i++)f=p.x*b[i].x+p.y*b[i].y,("undefined"==typeof j||f<j)&&(j=f),("undefined"==typeof k||f>k)&&(k=f);if(e<j||k<d)return!1}}return!0};